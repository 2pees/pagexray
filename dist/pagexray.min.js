/*!
 * PageXray v0.14.3 - Xray your HAR file and know all about the page - https://github.com/sitespeedio/pagexray
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PageXray=e()}}(function(){return function e(t,n,s){function r(o,a){if(!n[o]){if(!t[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){var n=t[o][1][e];return r(n||e)},u,u.exports,e,t,n,s)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<s.length;o++)r(s[o]);return r}({1:[function(e,t,n){"use strict";function s(e,t){return-1===e.timings[t]?0:e.timings[t]}var r=e("./util"),i=e("./headers");t.exports={asset:function(e){var t=e.response,n=e.request,o=r.getContentType(t.content.mimeType),a=i.flatten(n.headers),h=i.flatten(t.headers),c={blocked:s(e,"blocked"),dns:s(e,"dns"),connect:s(e,"connect"),send:s(e,"send"),wait:s(e,"wait"),receive:s(e,"receive")};return{type:o,url:n.url,transferSize:t.bodySize,contentSize:t.content.size<0?t.bodySize:t.content.size,headerSize:t.headersSize,expires:i.getExpires(h),status:t.status,timeSinceLastModified:i.getTimeSinceLastModified(h),httpVersion:r.getHTTPVersion(t.httpVersion),headers:{request:a,response:h},timings:c,cookies:n.cookies.length}},domainInfo:function(e,t){var n=r.getHostname(e.url),s=t[n]||{transferSize:0,contentSize:0,headerSize:0,requests:0,timings:{blocked:0,dns:0,connect:0,send:0,wait:0,receive:0}};s.transferSize+=e.transferSize,s.contentSize+=e.contentSize,s.headerSize+=e.headerSize,s.requests+=1,s.timings.blocked+=e.timings.blocked,s.timings.dns+=e.timings.dns,s.timings.connect+=e.timings.connect,s.timings.send+=e.timings.send,s.timings.wait+=e.timings.wait,s.timings.receive+=e.timings.receive,t[n]=s},responseCode:function(e,t){var n=t[e.status]||0;t[e.status]=n+1},missingCompression:function(e,t){var n=e.headers.response["content-encoding"],s=["html","plain","json","javascript","css","svg"].includes(e.type),r=["gzip","br","deflate"].includes(n),i=e.contentSize>2e3;s&&i&&!r&&(t.missingCompression+=1)},defaultContentTypes:function(){return{html:{transferSize:0,contentSize:0,headerSize:0,requests:0,timings:{blocked:0,dns:0,connect:0,send:0,wait:0,receive:0}},css:{transferSize:0,contentSize:0,headerSize:0,requests:0,timings:{blocked:0,dns:0,connect:0,send:0,wait:0,receive:0}},javascript:{transferSize:0,contentSize:0,headerSize:0,requests:0,timings:{blocked:0,dns:0,connect:0,send:0,wait:0,receive:0}},image:{transferSize:0,contentSize:0,headerSize:0,requests:0,timings:{blocked:0,dns:0,connect:0,send:0,wait:0,receive:0}},font:{transferSize:0,contentSize:0,headerSize:0,requests:0,timings:{blocked:0,dns:0,connect:0,send:0,wait:0,receive:0}}}},contentType:function(e,t){if(/^2\d{2}/.test(e.status)){var n=t[e.type]||{transferSize:0,contentSize:0,headerSize:0,requests:0,timings:{blocked:0,dns:0,connect:0,send:0,wait:0,receive:0}};n.requests+=1,n.transferSize+=Math.max(e.transferSize,0),n.contentSize+=Math.max(e.contentSize,0),n.headerSize+=Math.max(e.headerSize,0),t[e.type]=n}}}},{"./headers":2,"./util":6}],2:[function(e,t,n){"use strict";t.exports={flatten:function(e){return e.reduce(function(e,t){return e[t.name.toLowerCase()]=t.value,e},{})},getExpires:function(e){var t=/max-age=(\d+)/,n=0;if(e["cache-control"]){if(-1!==e["cache-control"].indexOf("no-cache")||-1!==e["cache-control"].indexOf("no-store"))return 0;var s=e["cache-control"].match(t);if(s)return parseInt(s[1],10)}else if(e.expires){var r=new Date(e.expires),i=(new Date).getTime();n=r.getTime()-i}return n},getTimeSinceLastModified:function(e){var t=e["last-modified"];if(!t)return-1;var n=Date.parse(t),s=Date.now();return e.date&&(s=Date.parse(e.date)),(s-n)/1e3}}},{}],3:[function(e,t,n){"use strict";function s(e,t,n){e.forEach(function(e){e.expireStats=e.expireStats.summarize(),e.lastModifiedStats=e.lastModifiedStats.summarize(),e.cookieStats=e.cookieStats.summarize(),e.totalDomains=Object.keys(e.domains).length,t.includeAssets||(e.assets=[]),n?(e.firstParty.cookieStats=e.firstParty.cookieStats.summarize(),e.thirdParty.cookieStats=e.thirdParty.cookieStats.summarize()):(e.firstParty={},e.thirdParty={})})}var r=e("./util"),i=e("./collect"),o=e("./sitespeed"),a=e("./webpagetest"),h=e("./statistics").Statistics;t.exports={convertIndex:function(e,n,s){return t.exports.convert(e,s)[n]},convert:function(e,t){var n=[],c={},u={},l=void 0;return((t=t||{}).firstParty||e.log.pages[0]._meta&&e.log.pages[0]._meta.firstParty)&&(l=t.firstParty||e.log.pages[0]._meta.firstParty),e.log.entries.sort(function(e,t){return new Date(e.startedDateTime).getTime()-new Date(t.startedDateTime).getTime()}),e.log.entries.forEach(function(s){if(!u[s.pageref]){var o=r.getFinalURL(s,e),a=0===o.chain.length?s.response.httpVersion:r.getEntryByURL(e.log.entries,o.url).response.httpVersion;c={url:s.request.url,meta:{browser:{},startedDateTime:s.startedDateTime},finalUrl:o.url,baseDomain:r.getHostname(o.url),documentRedirects:0===o.chain.length?0:o.chain.length-1,redirectChain:o.chain,transferSize:0,contentSize:0,headerSize:0,requests:0,missingCompression:0,httpType:r.getConnectionType(a),httpVersion:r.getHTTPVersion(a),contentTypes:i.defaultContentTypes(),assets:[],responseCodes:{},firstParty:{cookieStats:new h,contentTypes:i.defaultContentTypes()},thirdParty:{cookieStats:new h,contentTypes:i.defaultContentTypes()},domains:{},expireStats:new h,lastModifiedStats:new h,cookieStats:new h},e.log.browser&&e.log.browser.name&&(c.meta.browser.name=e.log.browser.name),e.log.browser&&e.log.browser.version&&(c.meta.browser.version=e.log.browser.version),u[s.pageref]=c,n.push(c)}var f=i.asset(s);if(c.expireStats.add(f.expires),-1!==f.timeSinceLastModified&&c.lastModifiedStats.add(f.timeSinceLastModified),c.cookieStats.add(f.cookies),c.assets.push(f),i.domainInfo(f,c.domains,t),i.responseCode(f,c.responseCodes),i.contentType(f,c.contentTypes),i.missingCompression(f,c),c.transferSize+=s.response.bodySize,c.contentSize+=s.response.content.size<0?s.response.bodySize:s.response.content.size,c.headerSize+=s.response.headersSize,l){var p=c.thirdParty;f.url.match(l)&&(p=c.firstParty),p.requests=p.requests+1||1,p.transferSize=p.transferSize+f.transferSize||f.transferSize,p.contentSize=p.contentSize+f.contentSize||f.contentSize,p.headerSize=p.headerSize+f.headerSize||f.headerSize,p.cookieStats.add(f.cookies),i.contentType(f,p.contentTypes)}c.requests+=1}),s(n,t,l),e.log.pages[0]._meta?o.addMetrics(e,n):"WebPagetest"===e.log.creator.name&&a.addMetrics(e,n),n}}},{"./collect":1,"./sitespeed":4,"./statistics":5,"./util":6,"./webpagetest":7}],4:[function(e,t,n){"use strict";t.exports={addMetrics:function(e,t){for(var n=0;n<e.log.pages.length;n++){var s=e.log.pages[n],r=t[n];r.meta.connectivity=s._meta.connectivity,r.meta.screenshot=s._meta.screenshot,r.meta.video=s._meta.video,r.meta.result=s._meta.result,r.visualMetrics=s._visualMetrics,r.meta.title=s.title}}}},{}],5:[function(e,t,n){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),i=function(){function e(){s(this,e),this.values=[],this.total=0}return r(e,[{key:"add",value:function(e){return this.values.push(e),this.total+=e,this}},{key:"summarize",value:function(){var e=this.values;if(0!==e.length){e.sort(function(e,t){return e-t});var t=Math.floor(e.length/2),n=void 0;return n=e.length%2==0?Number(((e[t]+e[t-1])/2).toFixed(0)):Number(e[t].toFixed(0)),{min:Number(e[0].toFixed(0)),median:n,max:Number(e[e.length-1].toFixed(0)),total:Number(this.total.toFixed(0)),values:e.length}}}}]),e}();t.exports={Statistics:i}},{}],6:[function(e,t,n){"use strict";var s=e("url"),r=[[/^text\/html/,"html"],[/^text\/plain/,"plain"],[/^text\/css/,"css"],[/javascript/,"javascript"],[/flash/,"flash"],[/^image\/x-icon/,"favicon"],[/^image\/vnd.microsoft.icon/,"favicon"],[/svg/,"svg"],[/^image/,"image"],[/^application\/.*font/,"font"],[/^font\/.*/,"font"],[/^application\/json/,"json"],[/^application\/ocsp-response/,"oscp"],[/.*/,"other"]];t.exports={getContentType:function(e){return r.find(function(t){return t[0].test(e)})[1]},getHTTPVersion:function(e){return"h2"===e||"HTTP/2.0"===e?"HTTP/2.0":(e.indexOf("spdy"),e.toUpperCase())},getConnectionType:function(e){return"h2"===e||"HTTP/2.0"===e?"h2":e.indexOf("spdy")>-1?"spdy":"h1"},getHostname:function(e){return e?s.parse(e).hostname||"":""},getFinalURL:function(e,t){for(var n=e.request.url,s=[n],r=t.log.entries.reduce(function(e,t){return e[t.request.url]=t.response.redirectURL||"",e},{}),i=r[n];i&&""!==i;)i=r[n=i],s.push(i);return 1===s.length&&(s=[]),{url:n,chain:s}},getEntryByURL:function(e,t){var n=!0,s=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(a.request.url===t)return a}}catch(e){s=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(s)throw r}}}}},{url:12}],7:[function(e,t,n){"use strict";t.exports={addMetrics:function(e,t){for(var n=0;n<e.log.pages.length;n++)!function(n){var s=e.log.pages[n],r=t[n];r.visualMetrics={},s._lastVisualChange&&(r.visualMetrics.LastVisualChange=s._lastVisualChange),s._SpeedIndex&&(r.visualMetrics.SpeedIndex=s._SpeedIndex),s.pageTimings._startRender&&(r.visualMetrics.FirstVisualChange=s.pageTimings._startRender),s._visualComplete85&&(r.visualMetrics.VisualComplete85=s._visualComplete85),r.meta.title=s.title;var i=Object.keys(s).filter(function(e){return 0===e.indexOf("_cpu")}).reduce(function(e,t){return e[t.split(".")[1]]=s[t],e},{});Object.keys(i).length>0&&(r.cpu=i)}(n)}}},{}],8:[function(e,t,n){(function(e){!function(s){function r(e){throw new RangeError(P[e])}function i(e,t){for(var n=e.length,s=[];n--;)s[n]=t(e[n]);return s}function o(e,t){var n=e.split("@"),s="";return n.length>1&&(s=n[0]+"@",e=n[1]),s+i((e=e.replace(I,".")).split("."),t).join(".")}function a(e){for(var t,n,s=[],r=0,i=e.length;r<i;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<i?56320==(64512&(n=e.charCodeAt(r++)))?s.push(((1023&t)<<10)+(1023&n)+65536):(s.push(t),r--):s.push(t);return s}function h(e){return i(e,function(e){var t="";return e>65535&&(t+=U((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=U(e)}).join("")}function c(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:b}function u(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function l(e,t,n){var s=0;for(e=n?A(e/C):e>>1,e+=A(e/t);e>M*z>>1;s+=b)e=A(e/M);return A(s+(M+1)*e/(e+w))}function f(e){var t,n,s,i,o,a,u,f,p,d,m=[],g=e.length,v=0,y=O,w=j;for((n=e.lastIndexOf(T))<0&&(n=0),s=0;s<n;++s)e.charCodeAt(s)>=128&&r("not-basic"),m.push(e.charCodeAt(s));for(i=n>0?n+1:0;i<g;){for(o=v,a=1,u=b;i>=g&&r("invalid-input"),((f=c(e.charCodeAt(i++)))>=b||f>A((S-v)/a))&&r("overflow"),v+=f*a,p=u<=w?x:u>=w+z?z:u-w,!(f<p);u+=b)a>A(S/(d=b-p))&&r("overflow"),a*=d;w=l(v-o,t=m.length+1,0==o),A(v/t)>S-y&&r("overflow"),y+=A(v/t),v%=t,m.splice(v++,0,y)}return h(m)}function p(e){var t,n,s,i,o,h,c,f,p,d,m,g,v,y,w,C=[];for(g=(e=a(e)).length,t=O,n=0,o=j,h=0;h<g;++h)(m=e[h])<128&&C.push(U(m));for(s=i=C.length,i&&C.push(T);s<g;){for(c=S,h=0;h<g;++h)(m=e[h])>=t&&m<c&&(c=m);for(c-t>A((S-n)/(v=s+1))&&r("overflow"),n+=(c-t)*v,t=c,h=0;h<g;++h)if((m=e[h])<t&&++n>S&&r("overflow"),m==t){for(f=n,p=b;d=p<=o?x:p>=o+z?z:p-o,!(f<d);p+=b)w=f-d,y=b-d,C.push(U(u(d+w%y,0))),f=A(w/y);C.push(U(u(f,0))),o=l(n,v,s==i),n=0,++s}++n,++t}return C.join("")}var d="object"==typeof n&&n&&!n.nodeType&&n,m="object"==typeof t&&t&&!t.nodeType&&t,g="object"==typeof e&&e;g.global!==g&&g.window!==g&&g.self!==g||(s=g);var v,y,S=2147483647,b=36,x=1,z=26,w=38,C=700,j=72,O=128,T="-",q=/^xn--/,k=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=b-x,A=Math.floor,U=String.fromCharCode;if(v={version:"1.4.1",ucs2:{decode:a,encode:h},decode:f,encode:p,toASCII:function(e){return o(e,function(e){return k.test(e)?"xn--"+p(e):e})},toUnicode:function(e){return o(e,function(e){return q.test(e)?f(e.slice(4).toLowerCase()):e})}},d&&m)if(t.exports==d)m.exports=v;else for(y in v)v.hasOwnProperty(y)&&(d[y]=v[y]);else s.punycode=v}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(e,t,n){"use strict";function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,i){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var a=/\+/g;e=e.split(t);var h=1e3;i&&"number"==typeof i.maxKeys&&(h=i.maxKeys);var c=e.length;h>0&&c>h&&(c=h);for(var u=0;u<c;++u){var l,f,p,d,m=e[u].replace(a,"%20"),g=m.indexOf(n);g>=0?(l=m.substr(0,g),f=m.substr(g+1)):(l=m,f=""),p=decodeURIComponent(l),d=decodeURIComponent(f),s(o,p)?r(o[p])?o[p].push(d):o[p]=[o[p],d]:o[p]=d}return o};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],10:[function(e,t,n){"use strict";function s(e,t){if(e.map)return e.map(t);for(var n=[],s=0;s<e.length;s++)n.push(t(e[s],s));return n}var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?s(o(e),function(o){var a=encodeURIComponent(r(o))+n;return i(e[o])?s(e[o],function(e){return a+encodeURIComponent(r(e))}).join(t):a+encodeURIComponent(r(e[o]))}).join(t):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],11:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":9,"./encode":10}],12:[function(e,t,n){"use strict";function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(e,t,n){if(e&&o.isObject(e)&&e instanceof s)return e;var r=new s;return r.parse(e,t,n),r}var i=e("punycode"),o=e("./util");n.parse=r,n.resolve=function(e,t){return r(e,!1,!0).resolve(t)},n.resolveObject=function(e,t){return e?r(e,!1,!0).resolveObject(t):t},n.format=function(e){return o.isString(e)&&(e=r(e)),e instanceof s?e.format():s.prototype.format.call(e)},n.Url=s;var a=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["<",">",'"',"`"," ","\r","\n","\t"],l=["{","}","|","\\","^","`"].concat(u),f=["'"].concat(l),p=["%","/","?",";","#"].concat(f),d=["/","?","#"],m=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=e("querystring");s.prototype.parse=function(e,t,n){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var s=e.indexOf("?"),r=-1!==s&&s<e.indexOf("#")?"?":"#",h=e.split(r),u=/\\/g;h[0]=h[0].replace(u,"/");var l=e=h.join(r);if(l=l.trim(),!n&&1===e.split("#").length){var x=c.exec(l);if(x)return this.path=l,this.href=l,this.pathname=x[1],x[2]?(this.search=x[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var z=a.exec(l);if(z){var w=(z=z[0]).toLowerCase();this.protocol=w,l=l.substr(z.length)}if(n||z||l.match(/^\/\/[^@\/]+@[^@\/]+/)){var C="//"===l.substr(0,2);!C||z&&y[z]||(l=l.substr(2),this.slashes=!0)}if(!y[z]&&(C||z&&!S[z])){for(var j=-1,O=0;O<d.length;O++)-1!==(k=l.indexOf(d[O]))&&(-1===j||k<j)&&(j=k);var T,q;-1!==(q=-1===j?l.lastIndexOf("@"):l.lastIndexOf("@",j))&&(T=l.slice(0,q),l=l.slice(q+1),this.auth=decodeURIComponent(T)),j=-1;for(O=0;O<p.length;O++){var k=l.indexOf(p[O]);-1!==k&&(-1===j||k<j)&&(j=k)}-1===j&&(j=l.length),this.host=l.slice(0,j),l=l.slice(j),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var P=this.hostname.split(/\./),O=0,M=P.length;O<M;O++){var A=P[O];if(A&&!A.match(m)){for(var U="",_=0,R=A.length;_<R;_++)A.charCodeAt(_)>127?U+="x":U+=A[_];if(!U.match(m)){var L=P.slice(0,O),D=P.slice(O+1),E=A.match(g);E&&(L.push(E[1]),D.unshift(E[2])),D.length&&(l="/"+D.join(".")+l),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=i.toASCII(this.hostname));var F=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+F,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==l[0]&&(l="/"+l))}if(!v[w])for(var O=0,M=f.length;O<M;O++){var V=f[O];if(-1!==l.indexOf(V)){var H=encodeURIComponent(V);H===V&&(H=escape(V)),l=l.split(V).join(H)}}var $=l.indexOf("#");-1!==$&&(this.hash=l.substr($),l=l.slice(0,$));var B=l.indexOf("?");if(-1!==B?(this.search=l.substr(B),this.query=l.substr(B+1),t&&(this.query=b.parse(this.query)),l=l.slice(0,B)):t&&(this.search="",this.query={}),l&&(this.pathname=l),S[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",K=this.search||"";this.path=F+K}return this.href=this.format(),this},s.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",s=this.hash||"",r=!1,i="";this.host?r=e+this.host:this.hostname&&(r=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(i=b.stringify(this.query));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||S[t])&&!1!==r?(r="//"+(r||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):r||(r=""),s&&"#"!==s.charAt(0)&&(s="#"+s),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+r+n+a+s},s.prototype.resolve=function(e){return this.resolveObject(r(e,!1,!0)).format()},s.prototype.resolveObject=function(e){if(o.isString(e)){var t=new s;t.parse(e,!1,!0),e=t}for(var n=new s,r=Object.keys(this),i=0;i<r.length;i++){var a=r[i];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var h=Object.keys(e),c=0;c<h.length;c++){var u=h[c];"protocol"!==u&&(n[u]=e[u])}return S[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!S[e.protocol]){for(var l=Object.keys(e),f=0;f<l.length;f++){var p=l[f];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||y[e.protocol])n.pathname=e.pathname;else{for(w=(e.pathname||"").split("/");w.length&&!(e.host=w.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==w[0]&&w.unshift(""),w.length<2&&w.unshift(""),n.pathname=w.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var d=n.pathname||"",m=n.search||"";n.path=d+m}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),v=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=v||g||n.host&&e.pathname,x=b,z=n.pathname&&n.pathname.split("/")||[],w=e.pathname&&e.pathname.split("/")||[],C=n.protocol&&!S[n.protocol];if(C&&(n.hostname="",n.port=null,n.host&&(""===z[0]?z[0]=n.host:z.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===w[0]?w[0]=e.host:w.unshift(e.host)),e.host=null),b=b&&(""===w[0]||""===z[0])),v)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,z=w;else if(w.length)z||(z=[]),z.pop(),z=z.concat(w),n.search=e.search,n.query=e.query;else if(!o.isNullOrUndefined(e.search))return C&&(n.hostname=n.host=z.shift(),(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift())),n.search=e.search,n.query=e.query,o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!z.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var j=z.slice(-1)[0],O=(n.host||e.host||z.length>1)&&("."===j||".."===j)||""===j,T=0,q=z.length;q>=0;q--)"."===(j=z[q])?z.splice(q,1):".."===j?(z.splice(q,1),T++):T&&(z.splice(q,1),T--);if(!b&&!x)for(;T--;T)z.unshift("..");!b||""===z[0]||z[0]&&"/"===z[0].charAt(0)||z.unshift(""),O&&"/"!==z.join("/").substr(-1)&&z.push("");var k=""===z[0]||z[0]&&"/"===z[0].charAt(0);if(C){n.hostname=n.host=k?"":z.length?z.shift():"";var I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");I&&(n.auth=I.shift(),n.host=n.hostname=I.shift())}return(b=b||n.host&&z.length)&&!k&&z.unshift(""),z.length?n.pathname=z.join("/"):(n.pathname=null,n.path=null),o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},s.prototype.parseHost=function(){var e=this.host,t=h.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":13,punycode:8,querystring:11}],13:[function(e,t,n){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}]},{},[3])(3)});
